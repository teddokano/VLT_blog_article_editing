電圧レベル変換．デジタル信号の電圧変換ってどうやればいいのか？

# デジタル信号
## デジタル信号の種類

いわゆる「デジタル信号」は論理レベルの1と0をHIGHとLOWの電圧レベルで表します．
このHIGH/LOWレベルを使って回路内での計算や制御を行います．
このHIGH/LOWレベルを表現する方法には歴史的に様々なものがありました．主に集積回路内で使われる構成によるもので現在よく使われているのがCMOSロジック回路です．
https://en.wikipedia.org/wiki/Logic_family

## 電圧レベル

デジタル信号は論理回路の内部だけでなく，データの転送にも使われます．現在も広く使われているHIGH/LOW信号を転送する際の基準となるレベルはCMOSの他にTTLがあります．
CMOSは電源電圧の半分の電圧を基準にしてHIGH/LOWを定義します．いっぽう，TTLは2.0V以上をHIGH，0.8V以下をLOWと定義しています．
TTLは元々バイポーラトランジスタを使ったロジック回路の方式で，電源電圧は5Vでした．
その後，より低い電源電圧(主に3.3V)で動作させるLVTTLが出てきますが，この場合のHIGH/LOWレベルはTTLと同様の2.0V/0.8Vのままでした．

### チップごとの電源電圧が違えば，デジタル信号の電圧も変わる

TTLのように電源電圧が違ってもHIGH/LOWの電圧レベルは変わらなければ相互の信号のやりとりには問題は起きません．
しかしCMOSの場合は電源電圧に応じてHIGH/LOWの電圧レベルが変わるため，その電圧差を考えておかなくてはなりません．
今日の様々なチップを組み合わせて使うシステムでは，それぞれのチップに必要な電源電圧は互いに異なる場合が多く，「これらをすべて3.3Vで統一して使う」ようなことは一般的にできません．また消費電力を抑える目的で各チップに最適な電源電圧を選択することも必要です．


#### 特殊な例 TTLとCMOSの組み合わせ

しかしもし，たとえば電源電圧5VのTTLチップと電源電圧3.3VのCMOSチップを組み合わせて使う場合，これらのチップ間で信号をやりとりするためには，それぞれのチップのHIGH/LOW電圧が互いに適合しているためそのまま接続できる場合があります．
ただし「場合がある」としたのは，5V側のチップの出力を3.3V側のチップの入力に接続する場合には「5Vトレラント入力」になっている必要があるためです．
5Vトレラント入力とは，5VのHIGH信号を3.3Vの電源電圧で動作するチップの入力に接続しても問題なく動作する入力のことです．
たとえば一般的なチップの入力には静電気対策のためのESD保護回路が入っていますが，このESD保護回路が次の図のような回路で構成されていると5Vを入力した際に入力から3.3Vの電源に電流が逆流してしまい，チップを破壊してしまうことがあります．
このような問題を起こさないための対策が取られた入力が5Vトレラント入力です．

** コラム **
余談ですが，この単純な入力と電源間のダイオードによるESD保護回路は入力側チップの電源が切られている時にも問題を引き起こします．チップごとに個別に電源のON/OFF管理を行うような場合に，出力側の信号が電源に回り込み，入力側チップを動作させてしまうことがあります．
3.3Vのマイコンが動作中に，その出力信号によって，電源が供給されてない3.3Vのチップを動作させてしまうような，そんな現象が発生します．


しかしCMOSのように電源電圧に応じてHIGH/LOWの電圧レベルが変わる場合には，その電圧差を考えておかなくてはなりません．

# 電圧以外に考慮すべきポイント

## 信号の方向 (片方向・双方向・方向の切替)
## 速度

